version: '3.8'

services:
  ai-service:
    build: .
    container_name: shelterai-ai-service
    ports:
      - "8000:8000"
    environment:
      - ENVIRONMENT=development
      - LOG_LEVEL=info
      # Si necesitas conectar a la DB desde aquí, usa el host: shelterai-postgres
      - DATABASE_URL=postgresql://root:root@shelterai-postgres:5432/shelterai
    volumes:
      - ./inference_api:/app
      - ./model_training:/model_training
      - ./data:/data
    restart: unless-stopped
    networks:
      - shelterai-network

# --- CONFIGURACIÓN DE RED ---
networks:
  shelterai-network:
    name: shelterai-network
    external: true  # <--- IMPORTANTE: Esto le dice que la red YA EXISTE (creada por el otro compose)